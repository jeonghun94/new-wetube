(()=>{const e=document.querySelector("video"),a=document.getElementById("videoController"),t=a.querySelector("#playPauseBtn"),r=a.querySelector("#volume"),u=a.querySelector("#volumeRange"),l=document.querySelector("#currentTime"),o=document.querySelector("#totalTime"),s=document.querySelector("#timeLine"),n=document.querySelector("#fullScreenBtn"),c=n.querySelector("i");let m=.5;e.volume=m;const d=()=>{e.paused?(e.play(),t.className="fas fa-pause"):(e.pause(),t.className="fas fa-play")},i=e=>new Date(1e3*e).toISOString().slice(14,-5),v=()=>{document.fullscreenElement?(document.exitFullscreen(),c.className="fas fa-expand"):(a.requestFullscreen(),c.className="fas fa-compress")};t.addEventListener("click",d),r.addEventListener("click",(()=>{e.muted?(e.muted=!1,u.value=m,r.className="fas fa-volume-up"):(e.muted=!0,u.value=0,r.className="fas fa-volume-mute")})),u.addEventListener("input",(a=>{const{target:{value:t}}=a;e.muted&&(e.muted=!1,r.className="fas fa-volume-mute"),r.className="0"===t?"fas fa-volume-off":"fas fa-volume-up",e.volume=m=t})),e.addEventListener("timeupdate",(()=>{l.innerHTML=i(Math.floor(e.currentTime)),s.value=Math.floor(e.currentTime)})),e.addEventListener("loadedmetadata",(()=>{o.innerHTML=i(Math.floor(e.duration)),s.max=Math.floor(e.duration)})),e.addEventListener("ended",(()=>{const{id:e}=a.dataset;fetch(`/api/videos/${e}/view`,{method:"POST"})})),s.addEventListener("input",(a=>{const{target:{value:t}}=a;e.currentTime=t})),n.addEventListener("click",v),window.addEventListener("keydown",(a=>{switch(a.key){case" ":d();break;case"ArrowLeft":e.currentTime-=5;break;case"ArrowRight":e.currentTime+=5;break;case"ArrowUp":e.volume+=.1,u.value=e.volume,r.className="fas fa-volume-up";break;case"ArrowDown":e.volume-=.1,e.volume<=0&&(r.className="fas fa-volume-off"),u.value=e.volume;break;case"f":v()}}))})();